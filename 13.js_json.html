<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>JSON 직렬화 및 역직렬화 실습</title>
  </head>
  <body>
    <div>
      <table border="1" style="border-collapse: collapse; margin: auto">
        <tr>
          <th>name</th>
          <th>age</th>
          <th>score</th>
        </tr>
        <tr>
          <td id="name"></td>
          <td id="age"></td>
          <td id="score"></td>
        </tr>
      </table>

      <table border="1" style="border-collapse: collapse; margin: auto" id="table2">
        <tr>
          <th>name</th>
          <th>age</th>
          <th>score</th>
        </tr>
      </table>
    </div>

    <script>
      // 단일 객체
      const jsonTxt1 = '{"name":"Alice","age":25,"score":85}';
      // 객체 배열
      const jsonTxt2 =
        '[{"name":"Alice","age":25,"score":85},{"name":"Bob","age":28,"score":92},{"name":"Charlie","age":32,"score":88}]';
      // json 역직렬화 (파싱)
      const obj1 = JSON.parse(jsonTxt1);
      const obj2 = JSON.parse(jsonTxt2);
      document.getElementById("name").innerHTML = obj1.name;
      document.getElementById("age").innerHTML = obj1.age;
      document.getElementById("score").innerHTML = obj1.score;

      let table2 = document.getElementById("table2");

      obj2.forEach((element) => {
        table2.innerHTML += `<tr><td>${element.name}</td><td>${element.age}</td><td>${element.score}</td></tr>`;
      });

      // json 직렬화
      const jsonTxt3 = JSON.stringify(obj2);
      console.log(jsonTxt3);
    </script>
  </body>
</html>
